{% extends "base.html" %}

{% block head_title %}
    Формуляры
{% endblock%}

{% block body %}
    {% if guest %}
        <p style="text-align: center; color:red">
            Данную страницу могут просматривать только
            авторизованные пользователи, имеющие
            соответствующие права
        </p>

        <p style="text-align: center">
            <a href="http://127.0.0.1:5000/sign_in">
                Авторизоваться
            </a>
        </p>
    {% else %}
        <p style="text-align: center">
            <a href="http://127.0.0.1:5000">
                ←
            </a>
        </p>

        <table id="data"
               class="table table-striped"
               border="1"
               style="border-collapse: collapse"
               align="center">
            <thead>
                <tr>
                    {% if not reader %}
                        <th>Логин читателя</th>
                    {% endif %}
                    <th>Название книги</th>
                    <th>Ф.И.О. автора</th>
                    <th>Дата начала чтения</th>
                    <th>Дата завершения чтения</th>
                    <th>Книга прочтена?</th>
                </tr>
            </thead>
            <tbody>
                {% for formular in formulars %}
                    <tr>
                        {% if not reader %}
                            <td>{{ formular.reader.login }}</td>
                        {% endif %}
                        <td>{{ formular.book.title }}</td>
                        <td>{{ formular.book.author }}</td>
                        <td>{{ formular.date_of_begin_of_reading }}</td>
                        <td>
                            {% if formular.date_of_end_of_reading %}
                                {{ formular.date_of_end_of_reading }}
                            {% else %}
                                -
                            {% endif %}
                        </td>
                        <td>
                            {% if formular.read %}
                                Да
                            {% else %}
                                Нет
                            {% endif %}
                        </td>
                        {% if not reader %}
                            <td>
                                <form action="" method="post">
                                    <button type="submit"
                                            name="delete_formular"
                                            value="{{ formular.id }}">
                                        Удалить
                                    </button>
                                </form>
                            </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
{% endblock %}
